{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.jsx","webpack:///./src/Chart.jsx","webpack:///./src/ChartGrid.jsx"],"names":["contentNode","document","getElementById","render","PriceChart","props","state","prices","yAxisDomain","newProps","update","price","newPrices","slice","push","bid","ask","yDomain","gap","length","setState","Component","CharGrid","Gdax","Trade","ideal","delay","timerID","setInterval","loadData","clearInterval","uri","fetch","then","res","ok","json","data","catch","console","log","err","type","ticks","d","title","clone","Object","assign","id","to","from","time","substr","realDiff","idealDiff","newIdeal","newDelay"],"mappings":"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","file":"app.bundle.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([\"./src/App.jsx\",\"vendor\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import 'babel-polyfill';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport ChartGrid from './ChartGrid.jsx';\n\n\nconst contentNode = document.getElementById('contents');\nReactDOM.render(<ChartGrid />, contentNode);\n\n\n\n\n// HMR from webpack-dev\nif (module.hot) {\n\tmodule.hot.accept();\n}","import React from 'react';\nimport { LineChart, Line, XAxis, YAxis, Tooltip } from 'recharts';\nimport 'whatwg-fetch';\n\n\nexport default class PriceChart extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\t/*\n\t\tthis.state = { prices: [\n\t\t\t{time:'12:01', Provider1: 12, Provider2: 19, },\n\t\t\t{time:'12:02', Provider1: 18, Provider2: 22,},\n\t\t\t{time:'12:03', Provider1: 7,  Provider2: 45,},\n\t\t]};*/\n\t\tthis.state = { prices: [], yAxisDomain:[]};\n\t}\n\n\tcomponentWillReceiveProps(newProps) {\n\t\tthis.update(newProps.price);\n\t}\n\n\tupdate(price) {\n\t\tlet newPrices = this.state.prices.slice();\n\t\tnewPrices.push(price);\n\t\tlet bid = price.bid;\n\t\tlet ask = price.ask;\n\t\tlet yDomain = this.state.yAxisDomain.slice();\n\t\tlet gap = (ask-bid)/2;\n\t\tif(yDomain.length<2) {\n\t\t\tyDomain = [bid-gap, ask+gap];\n\t\t} else {\n\t\t\tyDomain[0] = bid-gap < yDomain[0]? bid-gap : yDomain[0];\n\t\t\tyDomain[1] = ask+gap > yDomain[1]? ask+gap : yDomain[1];\n\t\t}\n\t\tthis.setState({prices: newPrices, yAxisDomain: yDomain});\t\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<LineChart width={800} height={400} data={this.state.prices}>\n\t\t\t\t<XAxis dataKey=\"time\"/>\n\t\t\t\t<YAxis domain={this.state.yAxisDomain}/>\n\t\t\t\t<Tooltip />\n\t\t\t\t<Line type=\"monotone\" dataKey=\"bid\" stroke=\"#8884d8\" />\n\t\t\t\t<Line type=\"monotone\" dataKey=\"ask\" stroke=\"#82ca9d\" />\n\t\t\t</LineChart>\n\t\t);\n\t}\n}\n\n","import React from 'react';\nimport PriceChart from './Chart.jsx';\n\nexport default class CharGrid extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = { Gdax:{},  Trade:{ideal:0.0, delay:0.0}, };\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.timerID = setInterval(\n\t\t\t() => {\n\t\t\t\tthis.loadData('/api/btc-tick');\n\t\t\t\tthis.loadData('/api/btc-trade');\n\t\t\t}\n\t\t\t,1000\n\t\t);\n\t}\n\tcomponentWillUnmount() {\n\t\tclearInterval(this.timerID);\n\t}\n\n\tloadData(uri) {\n\t\tfetch(uri)\n\t\t\t.then( res => {\n\t\t\t\tif(res.ok) {\n\t\t\t\t\tres.json().then( data => {\n\t\t\t\t\t\t//console.log(data);\n\t\t\t\t\t\tthis.update(data);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}).catch( err=>{\n\t\t\t\tconsole.log(`Error in feching data from server: ${err}`);\n\t\t\t});\n\t}\n\n\tupdate(data) {\n\t\tif(data.type && data.type=='tick') {\n\t\t\tlet bid, ask;\n\t\t\tfor( let d of data.ticks) {\n\t\t\t\tif(d.title=='Coinbase') {\n\t\t\t\t\tbid = d.bid;\n\t\t\t\t\task = d.ask;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n            \n\t\t\tlet clone = Object.assign({}, this.state.Trade);\n\t\t\tclone[data.id] = data.to.bid - data.from.ask;\n\t\t\tthis.setState({Gdax:{time:data.id.substr(-9, 5), bid:bid, ask:ask }, \n\t\t\t\tTrade: clone\n\t\t\t});\n\t\t}\n\t\telse if(data.type && data.type=='trade' && this.state.Trade[data.id]) {\n\t\t\tlet realDiff = data.to.bid - data.from.ask;\n\t\t\tlet idealDiff = this.state.Trade[data.id];\n\t\t\tlet newIdeal = this.state.Trade.ideal + idealDiff;\n\t\t\tlet newDelay = this.state.Trade.delay + realDiff;\n            \n\t\t\tlet clone = Object.assign({}, this.state.Trade);\n\t\t\tdelete clone[data.id];\n\t\t\tclone.ideal = newIdeal;\n\t\t\tclone.delay = newDelay;\n\n\t\t\tthis.setState({Gdax: this.state.Gdax,  Trade: clone});\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<PriceChart price={this.state.Gdax} />\n\t\t\t\t<hr/>\n\t\t\t\t<div> ideal: {this.state.Trade.ideal}    delay :  {this.state.Trade.delay} </div>\n\t\t\t</div>\n\t\t);\n\t}\n}"],"sourceRoot":""}